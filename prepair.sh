truncate -s 2M header.img && cryptsetup luksFormat /dev/sda --header header.img && cryptsetup open --header header.img --type luks /dev/sda enc && pvcreate /dev/mapper/enc && vgcreate store /dev/mapper/enc && lvcreate -L 20G store -n root && lvcreate -L 4G store -n swap && lvcreate -l +100%FREE store -n home && mkfs.ext4 /dev/store/root && mkfs.ext4 /dev/store/home && mount /dev/store/root /mnt && mkdir /mnt/home && mount /dev/store/home /mnt/home && mkswap /dev/store/swap && swapon /dev/store/swap && mkfs.ext2 /dev/sdb1 && mkdir /mnt/boot && mount /dev/sdb1 /mnt/boot && mv header.img /mnt/boot

pacstrap -i /mnt base base-devel && genfstab -U -p /mnt >> /mnt/etc/fstab && arch-chroot /mnt /bin/bash
